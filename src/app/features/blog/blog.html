<section class="blog-slide">
    <div class="slide-content">
      <button class="back-btn" (click)="goBack()">
        <span class="back-arrow">←</span>
        Back
      </button>
      <div class="breadcrumb">
        <span class="type" (click)="goToType(blog.postType)">
          {{ blog.postType }}
        </span>
        <span class="arrow">›</span>
        <span class="project-title">{{ blog.title }}</span>
      </div>
  
      <h1 class="main-title">{{ blog.title }}</h1>
  
      <div class="tags">
        @for (tag of blog.tags; track tag) {
          <span class="tag">{{ tag }}</span>
        }
      </div>
    </div>
  </section>
  
  <main class="blog-container">
    <article class="blog-content markdown-content">
      @if (content) {
        @for (section of content.content; track section.type) {
          @switch (section.type) {
            @case ('h2') {
              <h2 [id]="formatId(section.text)">
                {{ section.text }}
              </h2>
            }
            @case ('p') {
              <p>{{ section.text }}</p>
            }
            @case ('list') {
              <ul>
                @for (item of section.items; track item) {
                  <li>{{ item }}</li>
                }
              </ul>
            }
            @case ('code') {
              <div class="code-content">
                <div class="code-header">
                  <p class="file-name">{{ section.language }}</p>
                  <button class="copy-btn" (click)="copyCode(section.snippet)">
                    {{ copied ? 'Copied!' : 'Copy' }}
                  </button>
                </div>
                <pre><code>{{ section.snippet }}</code></pre>
              </div>
            }
            @case ('image') {
              <figure>
                <img
                  class="article-image"
                  [src]="readImage(section.url)"
                  [alt]="section.caption || ''"
                  (load)="onImageLoad($event)"
                />
                <figcaption>{{ section.caption }}</figcaption>
              </figure>
            }
          }
        }
      } @else {
        <p>Loading content...</p>
      }
    </article>
  
    <aside class="right-section">
      <div class="search-bar">
        <input type="text" placeholder="Search..." />
        <img [src]="readIcon('search.svg')" alt="Search" />
      </div>
  
      <div class="headings-list">
        <h3>Contents</h3>
        @if (content) {
          @for (section of content.content; track section.type) {
            @if (section.type === 'h2') {
              <button (click)="scrollTo(section.text)">
                {{ section.text }}
              </button>
            }
          }
        }
      </div>
    </aside>
  </main>
  